<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>CourseService.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">springboot-course-1</a> &gt; <a href="index.source.html" class="el_package">com.accolite.course.service</a> &gt; <span class="el_source">CourseService.java</span></div><h1>CourseService.java</h1><pre class="source lang-java linenums">package com.accolite.course.service;

import java.util.ArrayList;
import java.util.List;
import java.util.Optional;

import org.springframework.beans.factory.annotation.Autowired;
import org.springframework.http.HttpStatus;
import org.springframework.mail.SimpleMailMessage;
import org.springframework.mail.javamail.JavaMailSender;
import org.springframework.stereotype.Service;

import com.accolite.course.entities.CourseEntity;
import com.accolite.course.entities.Creator;
import com.accolite.course.entities.Skill;
import com.accolite.course.entities.StudentEntity;
import com.accolite.course.exception.NoContentException;
import com.accolite.course.models.Course;
import com.accolite.course.models.Student;
import com.accolite.course.repositories.CourseRepository;
import com.accolite.course.repositories.StudentRepository;


@Service
<span class="nc" id="L25">public class CourseService {</span>

	@Autowired
	private CourseRepository courseRepository;
	
	@Autowired
	private StudentRepository studentRepository;

	@Autowired
	private JavaMailSender JM;
	
	
	public void sendmail(String to,String body,String sub)
	{
<span class="nc" id="L39">		SimpleMailMessage msg = new SimpleMailMessage();</span>
<span class="nc" id="L40">		msg.setFrom(&quot;sorganviprasad@gmail.com&quot;);</span>
<span class="nc" id="L41">		msg.setTo(to);</span>
<span class="nc" id="L42">		msg.setText(body);</span>
<span class="nc" id="L43">		msg.setSubject(sub);</span>
<span class="nc" id="L44">		JM.send(msg);</span>
<span class="nc" id="L45">		System.out.println(&quot;mail send......&quot;);</span>
<span class="nc" id="L46">	}</span>
	
	
	
	public void sendmail2(String body,String sub) throws NoContentException
	{
<span class="nc" id="L52">		SimpleMailMessage msg = new SimpleMailMessage();</span>
<span class="nc" id="L53">		msg.setFrom(&quot;sorganviprasad@gmail.com&quot;);</span>
<span class="nc" id="L54">		List&lt;String&gt; entity = studentRepository.getAll();</span>
<span class="nc bnc" id="L55" title="All 2 branches missed.">		if(entity.isEmpty())</span>
	      {
<span class="nc" id="L57">	    	  throw new NoContentException(HttpStatus.NO_CONTENT);</span>
	      }
<span class="nc" id="L59">		int i= entity.size()-1;</span>
<span class="nc bnc" id="L60" title="All 2 branches missed.">		while(i&gt;=0)</span>
		{
<span class="nc" id="L62">		msg.setTo(entity.get(i));</span>
<span class="nc" id="L63">		msg.setText(body);</span>
<span class="nc" id="L64">		msg.setSubject(sub);</span>
<span class="nc" id="L65">		JM.send(msg);</span>
<span class="nc" id="L66">		i--;</span>
<span class="nc" id="L67">		System.out.println(&quot;mail send......&quot;);</span>
		}
<span class="nc" id="L69">	}</span>
	
	public List&lt;Student&gt; getStudents() throws NoContentException
	{
<span class="nc" id="L73">		List&lt;StudentEntity&gt; entity = studentRepository.getAll1();</span>
<span class="nc bnc" id="L74" title="All 2 branches missed.">		if(entity.isEmpty())</span>
	      {
<span class="nc" id="L76">	    	  throw new NoContentException(HttpStatus.NO_CONTENT);</span>
	      }
<span class="nc" id="L78">		int i=entity.size()-1;</span>
<span class="nc" id="L79">		 ArrayList&lt;Student&gt; i1=new ArrayList&lt;Student&gt;(i);</span>
<span class="nc bnc" id="L80" title="All 2 branches missed.">	      while(i&gt;=0)</span>
	      {
<span class="nc" id="L82">	    	  i1.add(mapEntityToObject(entity.get(i)));</span>
<span class="nc" id="L83">	    	  i--;</span>
	      }
<span class="nc" id="L85">	      return i1;</span>
	}
	
	public List&lt;Student&gt; stubyemail(String email) throws NoContentException
	{
<span class="nc" id="L90">	      List&lt;StudentEntity&gt; entity= studentRepository.findByEmail(email);</span>
<span class="nc bnc" id="L91" title="All 2 branches missed.">	      if(entity.isEmpty())</span>
	      {
<span class="nc" id="L93">	    	  throw new NoContentException(HttpStatus.NO_CONTENT);</span>
	      }
<span class="nc" id="L95">	      int i=entity.size()-1;</span>
<span class="nc" id="L96">	      ArrayList&lt;Student&gt; i1=new ArrayList&lt;Student&gt;(i);</span>
<span class="nc bnc" id="L97" title="All 2 branches missed.">	      while(i&gt;=0)</span>
	      {
<span class="nc" id="L99">	    	  i1.add(mapEntityToObject(entity.get(i)));</span>
<span class="nc" id="L100">	    	  i--;</span>
	      }
<span class="nc" id="L102">	      return i1;</span>
	}
	
	
	
	public Course saveIntocourseItemTable(Course course) throws NoContentException {
<span class="nc" id="L108">		CourseEntity entity = courseRepository.save(mapObjectToEntity1(course));</span>
<span class="nc" id="L109">		sendmail2(&quot;new course added&quot;,&quot;go and check&quot;);</span>
<span class="nc" id="L110">		return mapEntityToObject1(entity);</span>
	}
	
	public Student saveIntocourseItemTable(Student course) {
<span class="nc" id="L114">		StudentEntity entity = studentRepository.save(mapObjectToEntity(course));</span>
<span class="nc" id="L115">		return mapEntityToObject(entity);</span>
	}

	public CourseEntity mapObjectToEntity1(Course course) {
<span class="nc" id="L119">		CourseEntity entity = new CourseEntity();</span>
		
		
<span class="nc" id="L122">		entity.setId(course.getId());</span>
<span class="nc" id="L123">		entity.setDescription(course.getDescription());</span>
<span class="nc" id="L124">		entity.setPrerequesite(course.getPrerequesite());</span>
		
<span class="nc" id="L126">		entity.setLastupdated(course.getLastupdated());</span>
		
<span class="nc" id="L128">		entity.setFeedback(course.getFeedback());</span>
<span class="nc" id="L129">		entity.setSkill(addSkill(course));</span>
<span class="nc" id="L130">		entity.setCreator(addCreator(course));</span>
<span class="nc" id="L131">		entity.setLocation(course.getLocation());</span>
		
<span class="nc" id="L133">		return entity;</span>
	}
	
	public StudentEntity mapObjectToEntity(Student course) {
<span class="nc" id="L137">		StudentEntity entity = new StudentEntity();</span>
		
<span class="nc" id="L139">		entity.setEmail(course.getEmail());</span>
<span class="nc" id="L140">		entity.setId(course.getId());</span>
<span class="nc" id="L141">		entity.setName(course.getName());</span>
<span class="nc" id="L142">		return entity;</span>
	}

	private List&lt;Skill&gt; addSkill(Course course) {
<span class="nc" id="L146">		List&lt;Skill&gt; skillList = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L147">		int n = course.getSkills().size();</span>
<span class="nc" id="L148">		long skillId = 0;</span>
<span class="nc" id="L149">		String name = null;</span>

<span class="nc bnc" id="L151" title="All 2 branches missed.">		for (int i = 0; i &lt; n; i++) {</span>
<span class="nc" id="L152">			skillId = course.getSkills().get(i).getId();</span>
<span class="nc" id="L153">			name = course.getSkills().get(i).getName();</span>

<span class="nc" id="L155">			Skill skill = new Skill(skillId, name);</span>
			//skillRepository.save(skill);
<span class="nc" id="L157">			skillList.add(skill);</span>

		}

<span class="nc" id="L161">		return skillList;</span>

	}

	private List&lt;Skill&gt; addSkill(CourseEntity course) {
<span class="nc" id="L166">		List&lt;Skill&gt; skillList = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L167">		int n = course.getSkill().size();</span>
<span class="nc" id="L168">		long skillId = 0;</span>
<span class="nc" id="L169">		String name = null;</span>

<span class="nc bnc" id="L171" title="All 2 branches missed.">		for (int i = 0; i &lt; n; i++) {</span>
<span class="nc" id="L172">			skillId = course.getSkill().get(i).getId();</span>
<span class="nc" id="L173">			name = course.getSkill().get(i).getName();</span>

<span class="nc" id="L175">			Skill skill = new Skill(skillId, name);</span>
			
<span class="nc" id="L177">			skillList.add(skill);</span>

		}

<span class="nc" id="L181">		return skillList;</span>

	}

	private List&lt;Creator&gt; addCreator(Course course) {

		
<span class="nc" id="L188">		List&lt;Creator&gt; creatorList = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L189">		int n = course.getCreator().size();</span>
<span class="nc" id="L190">		long creatorId = 0;</span>
<span class="nc" id="L191">		String name = null;</span>

<span class="nc bnc" id="L193" title="All 2 branches missed.">		for (int i = 0; i &lt; n; i++) {</span>
<span class="nc" id="L194">			creatorId = course.getCreator().get(i).getId();</span>
<span class="nc" id="L195">			name = course.getCreator().get(i).getName();</span>

<span class="nc" id="L197">			Creator creator = new Creator(creatorId, name);</span>
			
<span class="nc" id="L199">			creatorList.add(creator);</span>

		}

<span class="nc" id="L203">		return creatorList;</span>

	}

	private List&lt;Creator&gt; addCreator(CourseEntity course) {		
<span class="nc" id="L208">		List&lt;Creator&gt; creatorList = new ArrayList&lt;&gt;();</span>
<span class="nc" id="L209">		int n = course.getCreator().size();</span>
<span class="nc" id="L210">		long creatorId = 0;</span>
<span class="nc" id="L211">		String name = null;</span>

<span class="nc bnc" id="L213" title="All 2 branches missed.">		for (int i = 0; i &lt; n; i++) {</span>
<span class="nc" id="L214">			creatorId = course.getCreator().get(i).getId();</span>
<span class="nc" id="L215">			name = course.getCreator().get(i).getName();</span>

<span class="nc" id="L217">			Creator creator = new Creator(creatorId, name);</span>
			
<span class="nc" id="L219">			creatorList.add(creator);</span>

		}

<span class="nc" id="L223">		return creatorList;</span>

	}

	public Course mapEntityToObject1(CourseEntity entity) {

<span class="nc" id="L229">		Course course = new Course();</span>
<span class="nc" id="L230">		course.setId(entity.getId());</span>
<span class="nc" id="L231">		course.setDescription(entity.getDescription());</span>
<span class="nc" id="L232">		course.setPrerequesite(entity.getPrerequesite());</span>
<span class="nc" id="L233">		course.setLastupdated(entity.getLastupdated());</span>
<span class="nc" id="L234">		course.setFeedback(entity.getFeedback());</span>
<span class="nc" id="L235">		course.setSkills(addSkill(entity));</span>
<span class="nc" id="L236">		course.setCreator(addCreator(entity));</span>
<span class="nc" id="L237">		course.setLocation(entity.getLocation());</span>

<span class="nc" id="L239">		return course;</span>
	}
	
	public Student mapEntityToObject(StudentEntity course) {
<span class="nc" id="L243">		Student entity = new Student();</span>
		
<span class="nc" id="L245">		entity.setEmail(course.getEmail());</span>
<span class="nc" id="L246">		entity.setId(course.getId());</span>
<span class="nc" id="L247">		entity.setName(course.getName());</span>
<span class="nc" id="L248">		return entity;</span>
	}


	public Course fetchRecordFromcourseTable(Long id) throws NoContentException {

<span class="nc" id="L254">		Optional&lt;CourseEntity&gt; entity = courseRepository.findById(id);</span>
<span class="nc bnc" id="L255" title="All 2 branches missed.">		if (!entity.isPresent()) {</span>
<span class="nc" id="L256">			throw new NoContentException(HttpStatus.NO_CONTENT);</span>
		}
<span class="nc" id="L258">		return mapEntityToObject1(entity.get());</span>

	}

	public Course updateRecordIntocourseTable(Course course) {
<span class="nc" id="L263">		CourseEntity entity = courseRepository.save(mapObjectToEntity1(course));</span>
<span class="nc" id="L264">		return mapEntityToObject1(entity);</span>

	}
	
	
	public int add(int a, int b)
	{
<span class="nc" id="L271">		int sum = a+b;</span>
<span class="nc" id="L272">		return sum;</span>
	
	}

	
	public List&lt;Course&gt; fetmul(String location) throws NoContentException
	{
<span class="nc" id="L279">	      List&lt;CourseEntity&gt; entity= courseRepository.findByLocation(location);</span>
<span class="nc bnc" id="L280" title="All 2 branches missed.">	      if(entity.isEmpty())</span>
	      {
<span class="nc" id="L282">	    	  throw new NoContentException(HttpStatus.NO_CONTENT);</span>
	      }
<span class="nc" id="L284">	      int i=entity.size()-1;</span>
<span class="nc" id="L285">	      ArrayList&lt;Course&gt; i1=new ArrayList&lt;Course&gt;(i);</span>
<span class="nc bnc" id="L286" title="All 2 branches missed.">	      while(i&gt;=0)</span>
	      {
<span class="nc" id="L288">	    	  i1.add(mapEntityToObject1(entity.get(i)));</span>
<span class="nc" id="L289">	    	  i--;</span>
	      }
<span class="nc" id="L291">	      return i1;</span>
	}
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.7.201606060606</span></div></body></html>